<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commit Watch - Options</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img id="logo-img" src="../icons/icon48.png" alt="Commit Watch Logo" />
        <div>
          <h1>Commit Watch</h1>
          <p class="subtitle">Settings & Preferences</p>
        </div>
      </div>
      <button id="theme-toggle-btn" class="icon-btn" title="Toggle theme">
        <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Authentication Section -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
          Authentication
        </h2>
        
        <div id="auth-status" class="auth-status">
          <!-- Filled by JavaScript -->
        </div>
        
        <div id="auth-form" class="auth-form">
          <!-- GitHub Authentication -->
          <div id="github-auth-section" class="platform-auth-section">
            <div class="platform-header">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
              </svg>
              <h3>GitHub</h3>
            </div>
            <div id="github-auth-status"></div>
            <div id="github-auth-form" class="hidden">
              <p class="help-text">
                Enter your GitHub Personal Access Token (PAT). 
                The token needs <code>repo</code>, <code>read:user</code>, and <code>notifications</code> scopes.
              </p>
              <div class="input-group">
                <label for="github-token-input">Personal Access Token</label>
                <div class="input-with-button">
                  <input type="password" id="github-token-input" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" />
                  <button id="show-github-token-btn" class="icon-btn" title="Show/Hide token">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="button-group">
                <button id="save-github-token-btn" class="btn btn-primary">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <polyline points="17 21 17 13 7 13 7 21"/>
                    <polyline points="7 3 7 8 15 8"/>
                  </svg>
                  Save Token
                </button>
                <a href="https://github.com/settings/tokens/new?scopes=repo,read:user,notifications&description=Commit%20Watch%20Extension" 
                   target="_blank" class="btn btn-secondary">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                    <polyline points="15 3 21 3 21 9"/>
                    <line x1="10" y1="14" x2="21" y2="3"/>
                  </svg>
                  Generate Token
                </a>
              </div>
            </div>
          </div>

          <!-- GitLab Authentication -->
          <div id="gitlab-auth-section" class="platform-auth-section">
            <div class="platform-header gitlab">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"/>
              </svg>
              <h3>GitLab</h3>
            </div>
            <div id="gitlab-auth-status"></div>
            <div id="gitlab-auth-form" class="hidden">
              <p class="help-text">
                Enter your GitLab Personal Access Token. 
                The token needs <code>read_api</code>, <code>read_user</code>, and <code>read_repository</code> scopes.
              </p>
              <div class="input-group">
                <label for="gitlab-token-input">Personal Access Token</label>
                <div class="input-with-button">
                  <input type="password" id="gitlab-token-input" placeholder="glpat-xxxxxxxxxxxxxxxxxxxx" />
                  <button id="show-gitlab-token-btn" class="icon-btn" title="Show/Hide token">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="button-group">
                <button id="save-gitlab-token-btn" class="btn btn-primary btn-gitlab">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <polyline points="17 21 17 13 7 13 7 21"/>
                    <polyline points="7 3 7 8 15 8"/>
                  </svg>
                  Save Token
                </button>
                <a href="https://gitlab.com/-/user_settings/personal_access_tokens?name=Commit+Watch+Extension&scopes=read_api,read_user,read_repository" 
                   target="_blank" class="btn btn-secondary">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
                    <polyline points="15 3 21 3 21 9"/>
                    <line x1="10" y1="14" x2="21" y2="3"/>
                  </svg>
                  Generate Token
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Notification Settings -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 01-3.46 0"/>
          </svg>
          Notifications
        </h2>

        <div class="setting-item">
          <div class="setting-info">
            <label for="notifications-enabled">Enable Notifications</label>
            <p class="setting-description">Receive Chrome notifications for new commits</p>
          </div>
          <label class="toggle">
            <input type="checkbox" id="notifications-enabled" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="release-notifications">Release Notifications</label>
            <p class="setting-description">Get notified about new version releases and tags</p>
          </div>
          <label class="toggle">
            <input type="checkbox" id="release-notifications" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="check-interval">Check Frequency</label>
            <p class="setting-description">How often to check for new commits</p>
          </div>
          <select id="check-interval" class="select">
            <option value="1">Every 1 minute</option>
            <option value="5" selected>Every 5 minutes</option>
            <option value="10">Every 10 minutes</option>
            <option value="15">Every 15 minutes</option>
            <option value="30">Every 30 minutes</option>
            <option value="60">Every hour</option>
          </select>
        </div>
      </section>

      <!-- Repository Filters -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
          </svg>
          Filters
        </h2>

        <div class="setting-item">
          <div class="setting-info">
            <label for="ignore-forks">Ignore Forked Repositories</label>
            <p class="setting-description">Don't monitor repositories that are forks</p>
          </div>
          <label class="toggle">
            <input type="checkbox" id="ignore-forks" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <label for="ignore-own">Ignore Own Commits</label>
            <p class="setting-description">Don't notify for commits you authored</p>
          </div>
          <label class="toggle">
            <input type="checkbox" id="ignore-own" />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </section>

      <!-- Repository Management -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
          </svg>
          Repositories
          <span id="repo-count" class="badge">0</span>
        </h2>

        <div class="repo-controls">
          <button id="refresh-repos-btn" class="btn btn-secondary btn-small">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/>
            </svg>
            Refresh List
          </button>
          <div class="repo-search">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <line x1="21" y1="21" x2="16.65" y2="16.65"/>
            </svg>
            <input type="text" id="repo-search" placeholder="Search repositories..." />
          </div>
        </div>

        <div class="repo-actions">
          <button id="enable-all-btn" class="btn btn-small btn-secondary">Enable All</button>
          <button id="disable-all-btn" class="btn btn-small btn-secondary">Disable All</button>
        </div>

        <div id="repo-list" class="repo-list">
          <p class="empty-state">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
            </svg>
            Connect to GitHub to see your repositories
          </p>
        </div>
      </section>

      <!-- Priority Keywords -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
          Priority Classification
        </h2>
        
        <div class="priority-info">
          <div class="priority-item priority-high">
            <span class="priority-badge">ðŸ”´ High</span>
            <p>Commits with: fix, hotfix, breaking, critical, urgent, security</p>
            <p>Commits to main/master by repository owner</p>
          </div>
          <div class="priority-item priority-medium">
            <span class="priority-badge">ðŸŸ¡ Medium</span>
            <p>Regular team commits, feature branches</p>
          </div>
          <div class="priority-item priority-low">
            <span class="priority-badge">ðŸŸ¢ Low</span>
            <p>Merge commits, docs, documentation, format, style, chore</p>
          </div>
        </div>
      </section>

      <!-- Keyboard Shortcuts -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="4" width="20" height="16" rx="2" ry="2"/>
            <path d="M6 8h.001M10 8h.001M14 8h.001M18 8h.001M8 12h.001M12 12h.001M16 12h.001M6 16h12"/>
          </svg>
          Keyboard Shortcuts
        </h2>
        
        <div class="shortcuts-info">
          <p class="help-text">Use these shortcuts for quick actions. Global shortcuts work anywhere in Chrome.</p>
          
          <div class="shortcuts-group">
            <h4>Global Shortcuts</h4>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd></span>
              <span class="shortcut-desc">Open Commit Watch popup</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd></span>
              <span class="shortcut-desc">Check for new commits now</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd></span>
              <span class="shortcut-desc">Mark all as read</span>
            </div>
          </div>
          
          <div class="shortcuts-group">
            <h4>Popup Shortcuts</h4>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>R</kbd></span>
              <span class="shortcut-desc">Refresh / Check now</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>M</kbd></span>
              <span class="shortcut-desc">Mark all as read</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>S</kbd></span>
              <span class="shortcut-desc">Open settings</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>T</kbd></span>
              <span class="shortcut-desc">Toggle theme</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>L</kbd></span>
              <span class="shortcut-desc">Logout</span>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-keys"><kbd>Esc</kbd></span>
              <span class="shortcut-desc">Close popup</span>
            </div>
          </div>
          
          <p class="help-text">
            <a href="chrome://extensions/shortcuts" id="customize-shortcuts-link">Customize global shortcuts</a> in Chrome settings.
          </p>
        </div>
      </section>

      <!-- About Section -->
      <section class="settings-section">
        <h2 class="section-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
          About
        </h2>
        
        <div class="about-info">
          <p><strong>Commit Watch</strong></p>
          <p>Intelligently monitors GitHub and GitLab repositories and notifies you about important commits, releases, and activity with automatic file-based detection.</p>
          <div class="about-links">
            <a href="https://commitwatchextension.vercel.app" target="_blank">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="2" y1="12" x2="22" y2="12"/>
                <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
              </svg>
              Website
            </a>
            ï½œ
            <a href="https://github.com/Mohammed-3tef/CommitWatch" target="_blank">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
              </svg>
              GitHub
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
      <span id="toast-message"></span>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2025 <a href="https://github.com/Mohammed-3tef" target="_blank">Mohammed Atef</a>. All rights reserved.</p>
    </footer>
  </div>

  <script src="options.js"></script>
</body>
</html>
